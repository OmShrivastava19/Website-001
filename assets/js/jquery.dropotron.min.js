!function(C){C.fn.disableSelection_dropotron=function(){return C(this).css("user-select","none").css("-khtml-user-select","none").css("-moz-user-select","none").css("-o-user-select","none").css("-webkit-user-select","none")},C.fn.dropotron=function(e){if(0==this.length)return C(this);if(1<this.length)for(var t=0;t<this.length;t++)C(this[t]).dropotron(e);return C.dropotron(C.extend({selectorParent:C(this)},e))},C.dropotron=function(e){var u=C.extend({selectorParent:null,baseZIndex:1e3,menuClass:"dropotron",expandMode:"hover",hoverDelay:150,hideDelay:250,openerClass:"opener",openerActiveClass:"active",submenuClassPrefix:"level-",mode:"fade",speed:"fast",easing:"swing",alignment:"left",offsetX:0,offsetY:0,globalOffsetY:0,IEOffsetX:0,IEOffsetY:0,noOpenerFade:!0,detach:!0,cloneOnDetach:!0},e),s=u.selectorParent,p=s.find("ul"),n=C("body"),t=C("body,html"),h=C(window),g=!1,o=null,v=null;s.on("doCollapseAll",function(){p.trigger("doCollapse")}),p.each(function(){var c=C(this),f=c.parent();0<u.hideDelay&&c.add(f).on("mouseleave",function(e){window.clearTimeout(v),v=window.setTimeout(function(){c.trigger("doCollapse")},u.hideDelay)}),c.disableSelection_dropotron().hide().addClass(u.menuClass).css("position","absolute").on("mouseenter",function(e){window.clearTimeout(v)}).on("doExpand",function(){if(c.is(":visible"))return!1;window.clearTimeout(v),p.each(function(){var e=C(this);C.contains(e.get(0),f.get(0))||e.trigger("doCollapse")});var e,t,o,n=f.offset(),s=f.position(),i=(f.parent().position(),f.outerWidth()),a=c.outerWidth(),l=c.css("z-index")==u.baseZIndex;if(l){switch(o=(e=u.detach?n:s).top+f.outerHeight()+u.globalOffsetY,t=u.alignment,c.removeClass("left").removeClass("right").removeClass("center"),u.alignment){case"right":(d=e.left-a+i)<0&&(d=e.left,t="left");break;case"center":(d=e.left-Math.floor((a-i)/2))<0?(d=e.left,t="left"):d+a>h.width()&&(d=e.left-a+i,t="right");break;case"left":default:(d=e.left)+a>h.width()&&(d=e.left-a+i,t="right")}c.addClass(t)}else switch(d="relative"==f.css("position")||"absolute"==f.css("position")?(o=u.offsetY,-1*s.left):(o=s.top+u.offsetY,0),u.alignment){case"right":d+=-1*f.parent().outerWidth()+u.offsetX;break;case"center":case"left":default:d+=f.parent().outerWidth()+u.offsetX}navigator.userAgent.match(/MSIE ([0-9]+)\./)&&RegExp.$1<8&&(d+=u.IEOffsetX,o+=u.IEOffsetY),c.css("left",d+"px").css("top",o+"px").css("opacity","0.01").show();var r=!1,d="relative"==f.css("position")||"absolute"==f.css("position")?-1*s.left:0;switch(c.offset().left<0?(d+=f.parent().outerWidth()-u.offsetX,r=!0):c.offset().left+a>h.width()&&(d+=-1*f.parent().outerWidth()-u.offsetX,r=!0),r&&c.css("left",d+"px"),c.hide().css("opacity","1"),u.mode){case"zoom":g=!0,f.addClass(u.openerActiveClass),c.animate({width:"toggle",height:"toggle"},u.speed,u.easing,function(){g=!1});break;case"slide":g=!0,f.addClass(u.openerActiveClass),c.animate({height:"toggle"},u.speed,u.easing,function(){g=!1});break;case"fade":g=!0,l&&!u.noOpenerFade?(r="slow"==u.speed?80:"fast"==u.speed?40:Math.floor(u.speed/2),f.fadeTo(r,.01,function(){f.addClass(u.openerActiveClass),f.fadeTo(u.speed,1),c.fadeIn(u.speed,function(){g=!1})})):(f.addClass(u.openerActiveClass),f.fadeTo(u.speed,1),c.fadeIn(u.speed,function(){g=!1}));break;case"instant":default:f.addClass(u.openerActiveClass),c.show()}return!1}).on("doCollapse",function(){return c.is(":visible")&&(c.hide(),f.removeClass(u.openerActiveClass),c.find("."+u.openerActiveClass).removeClass(u.openerActiveClass),c.find("ul").hide()),!1}).on("doToggle",function(e){return c.is(":visible")?c.trigger("doCollapse"):c.trigger("doExpand"),!1}),f.disableSelection_dropotron().addClass("opener").css("cursor","pointer").on("click touchend",function(e){g||(e.preventDefault(),e.stopPropagation(),c.trigger("doToggle"))}),"hover"==u.expandMode&&f.hover(function(e){g||(o=window.setTimeout(function(){c.trigger("doExpand")},u.hoverDelay))},function(e){window.clearTimeout(o)})}),p.find("a").css("display","block").on("click touchend",function(e){g||C(this).attr("href").length<1&&e.preventDefault()}),s.find("li").css("white-space","nowrap").each(function(){var e=C(this),t=e.children("a"),o=e.children("ul"),n=t.attr("href");t.on("click touchend",function(e){0==n.length||"#"==n?e.preventDefault():e.stopPropagation()}),0<t.length&&0==o.length&&e.on("click touchend",function(e){g||(s.trigger("doCollapseAll"),e.stopPropagation())})}),s.children("li").each(function(){var e=C(this).children("ul");if(0<e.length){u.detach&&(u.cloneOnDetach&&e.clone().attr("class","").hide().appendTo(e.parent()),e.detach().appendTo(n));for(var t=u.baseZIndex,o=e;0<o.length;0)o.css("z-index",t++),u.submenuClassPrefix&&o.addClass(u.submenuClassPrefix+(t-1-u.baseZIndex)),o=o.find("> li > ul")}}),h.on("scroll",function(){s.trigger("doCollapseAll")}).on("keypress",function(e){g||27!=e.keyCode||(e.preventDefault(),s.trigger("doCollapseAll"))}),t.on("click touchend",function(){g||s.trigger("doCollapseAll")})}}(jQuery);